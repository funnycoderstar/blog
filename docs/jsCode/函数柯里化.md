## ä»€ä¹ˆæ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆcurryï¼‰

å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆcurryï¼‰æ˜¯å‡½æ•°å¼ç¼–ç¨‹é‡Œé¢çš„æ¦‚å¿µã€‚curry çš„æ¦‚å¿µå¾ˆç®€å•ï¼šåªä¼ é€’ç»™å‡½æ•°ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒè¿”å›žä¸€ä¸ªå‡½æ•°åŽ»å¤„ç†å‰©ä¸‹çš„å‚æ•°ã€‚

ç®€å•ç‚¹æ¥è¯´å°±æ˜¯ï¼šæ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®ƒåªæŽ¥å—ä¸€éƒ¨åˆ†å‚æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªå‡½æ•°ï¼Œç›´åˆ°ä¼ é€’æ‰€æœ‰å‚æ•°ä¸ºæ­¢ã€‚

ä¸¾ä¸ª ðŸŒ°
å°†ä¸‹é¢æŽ¥å—ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°æ”¹ä¸ºæŽ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ã€‚

```js
const add = (x, y) => x + y;
add(1, 2);
```

æ”¹æˆæ¯æ¬¡åªæŽ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°

```js
const add = (x) => (y) => x + y;
add(1)(2);
```

> æŸ¯é‡ŒåŒ–ï¼Œä¸å¯å˜æ•°æ®ç±»åž‹ï¼Œçº¯å‡½æ•°ç­‰éƒ½æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„æ¦‚å¿µã€‚åœ¨ React ä¸­è¿™äº›æ¦‚å¿µå¾ˆå¸¸è§ï¼Œå› ä¸º React ä¸­å¾ˆå¤šæ¶‰åŠåˆ°å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µã€‚æƒ³è¦å…·ä½“äº†è§£ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Œå¯ä»¥æŸ¥çœ‹ [JS å‡½æ•°å¼ç¼–ç¨‹æŒ‡å—](https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/)

## add(1)(2)(3)

æˆ‘ä»¬å¯ä»¥è‡ªå·±å…ˆå°è¯•å†™ä¸€ä¸ª add(1)(2)(3)

```js
const add = (x) => (y) => (z) => x + y + z;
console.log(add(1)(2)(3));
```

çœ‹èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆéš¾ï¼Œä½†æ˜¯å¦‚æžœé¢è¯•å®˜çš„è¦æ±‚æ˜¯å®žçŽ°ä¸€ä¸ª add å‡½æ•°ï¼ŒåŒæ—¶æ”¯æŒä¸‹é¢è¿™å‡ ç§çš„ç”¨æ³•å‘¢

```js
add(1, 2, 3);
add(1, 2)(3);
add(1)(2, 3);
```

å¦‚æžœè¿˜æ˜¯æŒ‰ç…§ä¸Šé¢çš„è¿™ç§æ€è·¯ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯è¦å†™å¾ˆå¤šç§å‘¢...

æˆ‘ä»¬å½“ç„¶å¯ä»¥è‡ªå·±å®žçŽ°ä¸€ä¸ªå·¥å…·å‡½æ•°ä¸“é—¨æ¥ç”Ÿæˆ æŸ¯é‡ŒåŒ– å‡½æ•°ã€‚

ä¸»è¦æ€è·¯æ˜¯ä»€ä¹ˆå‘¢ï¼Œè¦åˆ¤æ–­å½“å‰ä¼ å…¥å‡½æ•°çš„å‚æ•°ä¸ªæ•° (args.length) æ˜¯å¦å¤§äºŽç­‰äºŽåŽŸå‡½æ•°æ‰€éœ€å‚æ•°ä¸ªæ•° (fn.length) ï¼Œå¦‚æžœæ˜¯ï¼Œåˆ™æ‰§è¡Œå½“å‰å‡½æ•°ï¼›å¦‚æžœæ˜¯å°äºŽï¼Œåˆ™è¿”å›žä¸€ä¸ªå‡½æ•°ã€‚

```js
const curry = (fn, ...args) =>
    // å‡½æ•°çš„å‚æ•°ä¸ªæ•°å¯ä»¥ç›´æŽ¥é€šè¿‡å‡½æ•°æ•°çš„.lengthå±žæ€§æ¥è®¿é—®
    args.length >= fn.length // è¿™ä¸ªåˆ¤æ–­å¾ˆå…³é”®ï¼ï¼ï¼
        ? // ä¼ å…¥çš„å‚æ•°å¤§äºŽç­‰äºŽåŽŸå§‹å‡½æ•°fnçš„å‚æ•°ä¸ªæ•°ï¼Œåˆ™ç›´æŽ¥æ‰§è¡Œè¯¥å‡½æ•°
          fn(...args)
        : /**
           * ä¼ å…¥çš„å‚æ•°å°äºŽåŽŸå§‹å‡½æ•°fnçš„å‚æ•°ä¸ªæ•°æ—¶
           * åˆ™ç»§ç»­å¯¹å½“å‰å‡½æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–ï¼Œè¿”å›žä¸€ä¸ªæŽ¥å—æ‰€æœ‰å‚æ•°ï¼ˆå½“å‰å‚æ•°å’Œå‰©ä½™å‚æ•°ï¼‰ çš„å‡½æ•°
           */
          (..._args) => curry(fn, ...args, ..._args);

function add1(x, y, z) {
    return x + y + z;
}
const add = curry(add1);
console.log(add(1, 2, 3));
console.log(add(1)(2)(3));
console.log(add(1, 2)(3));
console.log(add(1)(2, 3));
```

### ä¼˜åŒ–ï¼šæ”¯æŒä¸ç¡®å®šå‚æ•°

ä¸Šé¢è¿™ç§æ–¹å¼å­˜åœ¨çš„é—®é¢˜ï¼šå¿…é¡»äº‹å…ˆçŸ¥é“ä¼ å‡ ä¸ªå‚æ•°
å¿…é¡»äº‹å…ˆçŸ¥é“æ±‚å€¼çš„å‚æ•°ä¸ªæ•°ï¼Œé‚£èƒ½ä¸èƒ½è®©ä»£ç æ›´çµæ´»ç‚¹ï¼Œè¾¾åˆ°éšæ„ä¼ å‚çš„æ•ˆæžœï¼Œä¾‹å¦‚ï¼š add(2)(3)(4), add(5)(6)(7)(8)(9) è¿™æ ·çš„ã€‚

å¯ä»¥æŠŠ add å‡½æ•°æ”¹æˆä¸‹é¢è¿™ä¸ªä»£ç 

```js
function add(...args) {
    return args.reduce((sum, num) => sum + num, 0);
}
```

## é¢˜ç›®

ç¼–ç¨‹ä½¿å¾—ä»¥ä¸‹ç”¨ä¾‹å¯ä»¥é€šè¿‡

```js

sum(1)(2)(3)(4).sumOf() // è¾“å‡º 10
sum(1,2)(3).sumOf() è¾“å‡º 6
sum(1,2)(3,4).sumOf() è¾“å‡º 10
sum(1,2,3,4).sumOf() è¾“å‡º 10
```

è¿™ä¸ªè·Ÿä¸Šé¢çš„åŒºåˆ«åœ¨äºŽï¼Œè°ƒç”¨ sumOf() çš„æ—¶å€™æ‰è¾“å‡ºç»“æžœï¼Œæ‰€ä»¥å°±ä¸èƒ½é€šè¿‡åˆ¤æ–­å‚æ•°ä¸ªæ•°æ¥æ‰§è¡Œå‡½æ•°äº†ï¼Œè¦ä¿®æ”¹ä¸ºè°ƒç”¨ sumOf å‡½æ•°æ‰è°ƒç”¨å‡½æ•°ã€‚

```js
function curry(fn, ...args) {
    // return args.length >= fn.length ? fn(...args) : (..._args) => curry(fn, ...args, ..._args);
    const _fn = (..._args) => curry(fn, ...args, ..._args);
    _fn.sumOf = () => console.log(fn(...args));
    return _fn;
}
function add(...args) {
    return args.reduce((sum, num) => sum + num, 0);
}
const sum = curry(add);

sum(1)(2)(3)(4).sumOf(); // è¾“å‡º 10
sum(1, 2)(3).sumOf();
sum(1, 2)(3, 4).sumOf();
sum(1, 2, 3, 4).sumOf();
```
